<div class="col-md-2"></div>
<div class="col-md-8 card">
    <div class="header">
        <h4 class="title">Change Password</h4>
    </div>
    <div class="content">
        <form id="passwordform">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="oldpassword">Old Password</label>
                        <input id="oldpassword" type="password" class="form-control" name="oldpassword">
                    </div>
                    <div class="form-group">
                        <label for="newpassword">New Password</label>
                        <input id="newpassword" type="text" class="form-control" name="newpassword">
                    </div>
                    <div class="form-group">
                        <label for="password2">Retype Password</label>
                        <input id="password2" type="text" class="form-control" name="password2">
                    </div>
                </div>
                <div class="col-md-6">

                </div>
            </div>

            <div class="pull-right">
                <button type="submit" class="btn btn-warning btn-fill" onclick="ulist('/')">Back
                </button>
                <button type="submit" class="btn btn-default btn-fill" onclick="ulist('/')">
                    Submit
                </button>
            </div>
            <div class="clearfix"></div>
        </form>

    </div>
</div>

<script>
    $("#passwordform").validate({
        rules: {
            newpassword: {
                required: true,
                minlength: 6,
                maxlength: 10,

            },

            password2: {
                equalTo: "#password",
                minlength: 6,
                maxlength: 10
            }


        }
    });

    $('form').submit(function (event) {

        const oldpassword = $('#oldpassword').val();
        const newpassword = $('#newpassword').val();
        const formData = JSON.stringify({
            "oldpassword": oldpassword,
            "newpassword": newpassword
        });

        // process the form
        $.ajax({
            type: 'POST', // define the type of HTTP verb we want to use (POST for our form)
            url: '/account', // the url where we want to POST
            data: formData, // our data object
            contentType: 'application/json', // what type of data do we send to the server
            dataType: 'json', // what type of data do we expect back from the server
        })
        // using the done promise callback
            .done(function (data) {
                // log data to the console so we can see
                console.log(data);

            });


        // stop the form from submitting the normal way and refreshing the page
        event.preventDefault();
    });
</script>